<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="# SSOä»‹ç» # æ¦‚å¿µ SSO è‹±æ–‡å…¨ç§° Single Sign Onï¼Œå•ç‚¹ç™»å½•ã€‚SSO æ˜¯åœ¨å¤šä¸ªåº”ç”¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡å°±å¯ä»¥è®¿é—®æ‰€æœ‰ç›¸äº’ä¿¡ä»»çš„åº”ç”¨ç³»ç»Ÿã€‚ # å¥½å¤„ ç”¨æˆ·è§’åº¦ :ç”¨æˆ·èƒ½å¤Ÿåšåˆ°ä¸€æ¬¡ç™»å½•å¤šæ¬¡ä½¿ç”¨ï¼Œæ— éœ€è®°å½•å¤šå¥—ç”¨æˆ·åå’Œå¯†ç ï¼Œçœå¿ƒã€‚ ç³»ç»Ÿç®¡ç†å‘˜è§’åº¦ : ç®¡ç†å‘˜åªéœ€ç»´æŠ¤å¥½ä¸€ä¸ªç»Ÿä¸€çš„è´¦å·ä¸­å¿ƒå°±å¯ä»¥äº†ï¼Œæ–¹ä¾¿ã€‚ æ–°ç³»ç»Ÿå¼€å‘è§’åº¦: æ–°ç³»ç»Ÿå¼€å‘æ—¶åªéœ€ç›´æ¥å¯¹æ¥ç»Ÿä¸€çš„è´¦å·ä¸­å¿ƒå³å¯ï¼Œç®€åŒ–å¼€å‘æµç¨‹ï¼Œçœæ—¶ # å®ç°æ–¹å¼ è®¾è®¡æ–¹å¼ï¼š # ç”¨æˆ·ç™»å½•çŠ¶æ€çš„å­˜å‚¨ä¸æ ¡éªŒ å¸¸è§çš„ Web æ¡†æ¶å¯¹äº Session çš„å®ç°éƒ½æ˜¯ç”Ÿæˆä¸€ä¸ª SessionId å­˜å‚¨åœ¨æµè§ˆå™¨ Cookie ä¸­ã€‚ç„¶åå°† Session å†…å®¹å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯å†…å­˜ä¸­ã€‚ ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œç”Ÿæˆ AuthToken äº¤ç»™å®¢æˆ·ç«¯ä¿å­˜ã€‚å¦‚æœæ˜¯æµè§ˆå™¨ï¼Œå°±ä¿å­˜åœ¨ Cookie ä¸­ã€‚å¦‚æœæ˜¯æ‰‹æœº App å°±ä¿å­˜åœ¨ App æœ¬åœ°ç¼“å­˜ä¸­ã€‚æœ¬ç¯‡ä¸»è¦æ¢è®¨åŸºäº Web ç«™ç‚¹çš„ SSOã€‚ ç”¨æˆ·åœ¨æµè§ˆéœ€è¦ç™»å½•çš„é¡µé¢æ—¶ï¼Œå®¢æˆ·ç«¯å°† AuthToken æäº¤ç»™ SSO æœåŠ¡æ ¡éªŒç™»å½•çŠ¶æ€/è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯ å¯¹äºç™»å½•ä¿¡æ¯çš„å­˜å‚¨ï¼Œå»ºè®®é‡‡ç”¨ Redisï¼Œä½¿ç”¨ Redis é›†ç¾¤æ¥å­˜å‚¨ç™»å½•ä¿¡æ¯ï¼Œæ—¢å¯ä»¥ä¿è¯é«˜å¯ç”¨ï¼Œåˆå¯ä»¥çº¿æ€§æ‰©å……ã€‚åŒæ—¶ä¹Ÿå¯ä»¥è®© SSO æœåŠ¡æ»¡è¶³è´Ÿè½½å‡è¡¡/å¯ä¼¸ç¼©çš„éœ€æ±‚ã€‚ å¯¹è±¡ è¯´æ˜ AuthToken ç›´æ¥ä½¿ç”¨ UUID/GUID å³å¯ï¼Œå¦‚æœæœ‰éªŒè¯ AuthToken åˆæ³•æ€§éœ€æ±‚ï¼Œå¯ä»¥å°† UserName+æ—¶é—´æˆ³åŠ å¯†ç”Ÿæˆï¼ŒæœåŠ¡ç«¯è§£å¯†ä¹‹åéªŒè¯åˆæ³•æ€§ ç™»å½•ä¿¡æ¯ é€šå¸¸æ˜¯å°† UserIdï¼ŒUserName ç¼“å­˜èµ·æ¥ # ç”¨æˆ·ç™»å½•/ç™»å½•æ ¡éªŒ ç™»é™†æ—¶åºå›¾"><title>SSOå•ç‚¹ç™»å½•</title>
<link rel=canonical href=https://runqizhao.cn/p/sso%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/><link rel=stylesheet href=/scss/style.min.8e60baf4cd3fc55968717a6e39762f4d28ed7ef6007566b6c7970ad0fe907198.css><meta property='og:title' content="SSOå•ç‚¹ç™»å½•"><meta property='og:description' content="# SSOä»‹ç» # æ¦‚å¿µ SSO è‹±æ–‡å…¨ç§° Single Sign Onï¼Œå•ç‚¹ç™»å½•ã€‚SSO æ˜¯åœ¨å¤šä¸ªåº”ç”¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡å°±å¯ä»¥è®¿é—®æ‰€æœ‰ç›¸äº’ä¿¡ä»»çš„åº”ç”¨ç³»ç»Ÿã€‚ # å¥½å¤„ ç”¨æˆ·è§’åº¦ :ç”¨æˆ·èƒ½å¤Ÿåšåˆ°ä¸€æ¬¡ç™»å½•å¤šæ¬¡ä½¿ç”¨ï¼Œæ— éœ€è®°å½•å¤šå¥—ç”¨æˆ·åå’Œå¯†ç ï¼Œçœå¿ƒã€‚ ç³»ç»Ÿç®¡ç†å‘˜è§’åº¦ : ç®¡ç†å‘˜åªéœ€ç»´æŠ¤å¥½ä¸€ä¸ªç»Ÿä¸€çš„è´¦å·ä¸­å¿ƒå°±å¯ä»¥äº†ï¼Œæ–¹ä¾¿ã€‚ æ–°ç³»ç»Ÿå¼€å‘è§’åº¦: æ–°ç³»ç»Ÿå¼€å‘æ—¶åªéœ€ç›´æ¥å¯¹æ¥ç»Ÿä¸€çš„è´¦å·ä¸­å¿ƒå³å¯ï¼Œç®€åŒ–å¼€å‘æµç¨‹ï¼Œçœæ—¶ # å®ç°æ–¹å¼ è®¾è®¡æ–¹å¼ï¼š # ç”¨æˆ·ç™»å½•çŠ¶æ€çš„å­˜å‚¨ä¸æ ¡éªŒ å¸¸è§çš„ Web æ¡†æ¶å¯¹äº Session çš„å®ç°éƒ½æ˜¯ç”Ÿæˆä¸€ä¸ª SessionId å­˜å‚¨åœ¨æµè§ˆå™¨ Cookie ä¸­ã€‚ç„¶åå°† Session å†…å®¹å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯å†…å­˜ä¸­ã€‚ ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œç”Ÿæˆ AuthToken äº¤ç»™å®¢æˆ·ç«¯ä¿å­˜ã€‚å¦‚æœæ˜¯æµè§ˆå™¨ï¼Œå°±ä¿å­˜åœ¨ Cookie ä¸­ã€‚å¦‚æœæ˜¯æ‰‹æœº App å°±ä¿å­˜åœ¨ App æœ¬åœ°ç¼“å­˜ä¸­ã€‚æœ¬ç¯‡ä¸»è¦æ¢è®¨åŸºäº Web ç«™ç‚¹çš„ SSOã€‚ ç”¨æˆ·åœ¨æµè§ˆéœ€è¦ç™»å½•çš„é¡µé¢æ—¶ï¼Œå®¢æˆ·ç«¯å°† AuthToken æäº¤ç»™ SSO æœåŠ¡æ ¡éªŒç™»å½•çŠ¶æ€/è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯ å¯¹äºç™»å½•ä¿¡æ¯çš„å­˜å‚¨ï¼Œå»ºè®®é‡‡ç”¨ Redisï¼Œä½¿ç”¨ Redis é›†ç¾¤æ¥å­˜å‚¨ç™»å½•ä¿¡æ¯ï¼Œæ—¢å¯ä»¥ä¿è¯é«˜å¯ç”¨ï¼Œåˆå¯ä»¥çº¿æ€§æ‰©å……ã€‚åŒæ—¶ä¹Ÿå¯ä»¥è®© SSO æœåŠ¡æ»¡è¶³è´Ÿè½½å‡è¡¡/å¯ä¼¸ç¼©çš„éœ€æ±‚ã€‚ å¯¹è±¡ è¯´æ˜ AuthToken ç›´æ¥ä½¿ç”¨ UUID/GUID å³å¯ï¼Œå¦‚æœæœ‰éªŒè¯ AuthToken åˆæ³•æ€§éœ€æ±‚ï¼Œå¯ä»¥å°† UserName+æ—¶é—´æˆ³åŠ å¯†ç”Ÿæˆï¼ŒæœåŠ¡ç«¯è§£å¯†ä¹‹åéªŒè¯åˆæ³•æ€§ ç™»å½•ä¿¡æ¯ é€šå¸¸æ˜¯å°† UserIdï¼ŒUserName ç¼“å­˜èµ·æ¥ # ç”¨æˆ·ç™»å½•/ç™»å½•æ ¡éªŒ ç™»é™†æ—¶åºå›¾"><meta property='og:url' content='https://runqizhao.cn/p/sso%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/'><meta property='og:site_name' content='Runqi Blog'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='è®¤è¯é‰´æƒ'><meta property='article:published_time' content='2024-05-13T08:34:23+08:00'><meta property='article:modified_time' content='2024-05-13T08:34:23+08:00'><meta name=twitter:title content="SSOå•ç‚¹ç™»å½•"><meta name=twitter:description content="# SSOä»‹ç» # æ¦‚å¿µ SSO è‹±æ–‡å…¨ç§° Single Sign Onï¼Œå•ç‚¹ç™»å½•ã€‚SSO æ˜¯åœ¨å¤šä¸ªåº”ç”¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡å°±å¯ä»¥è®¿é—®æ‰€æœ‰ç›¸äº’ä¿¡ä»»çš„åº”ç”¨ç³»ç»Ÿã€‚ # å¥½å¤„ ç”¨æˆ·è§’åº¦ :ç”¨æˆ·èƒ½å¤Ÿåšåˆ°ä¸€æ¬¡ç™»å½•å¤šæ¬¡ä½¿ç”¨ï¼Œæ— éœ€è®°å½•å¤šå¥—ç”¨æˆ·åå’Œå¯†ç ï¼Œçœå¿ƒã€‚ ç³»ç»Ÿç®¡ç†å‘˜è§’åº¦ : ç®¡ç†å‘˜åªéœ€ç»´æŠ¤å¥½ä¸€ä¸ªç»Ÿä¸€çš„è´¦å·ä¸­å¿ƒå°±å¯ä»¥äº†ï¼Œæ–¹ä¾¿ã€‚ æ–°ç³»ç»Ÿå¼€å‘è§’åº¦: æ–°ç³»ç»Ÿå¼€å‘æ—¶åªéœ€ç›´æ¥å¯¹æ¥ç»Ÿä¸€çš„è´¦å·ä¸­å¿ƒå³å¯ï¼Œç®€åŒ–å¼€å‘æµç¨‹ï¼Œçœæ—¶ # å®ç°æ–¹å¼ è®¾è®¡æ–¹å¼ï¼š # ç”¨æˆ·ç™»å½•çŠ¶æ€çš„å­˜å‚¨ä¸æ ¡éªŒ å¸¸è§çš„ Web æ¡†æ¶å¯¹äº Session çš„å®ç°éƒ½æ˜¯ç”Ÿæˆä¸€ä¸ª SessionId å­˜å‚¨åœ¨æµè§ˆå™¨ Cookie ä¸­ã€‚ç„¶åå°† Session å†…å®¹å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯å†…å­˜ä¸­ã€‚ ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œç”Ÿæˆ AuthToken äº¤ç»™å®¢æˆ·ç«¯ä¿å­˜ã€‚å¦‚æœæ˜¯æµè§ˆå™¨ï¼Œå°±ä¿å­˜åœ¨ Cookie ä¸­ã€‚å¦‚æœæ˜¯æ‰‹æœº App å°±ä¿å­˜åœ¨ App æœ¬åœ°ç¼“å­˜ä¸­ã€‚æœ¬ç¯‡ä¸»è¦æ¢è®¨åŸºäº Web ç«™ç‚¹çš„ SSOã€‚ ç”¨æˆ·åœ¨æµè§ˆéœ€è¦ç™»å½•çš„é¡µé¢æ—¶ï¼Œå®¢æˆ·ç«¯å°† AuthToken æäº¤ç»™ SSO æœåŠ¡æ ¡éªŒç™»å½•çŠ¶æ€/è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯ å¯¹äºç™»å½•ä¿¡æ¯çš„å­˜å‚¨ï¼Œå»ºè®®é‡‡ç”¨ Redisï¼Œä½¿ç”¨ Redis é›†ç¾¤æ¥å­˜å‚¨ç™»å½•ä¿¡æ¯ï¼Œæ—¢å¯ä»¥ä¿è¯é«˜å¯ç”¨ï¼Œåˆå¯ä»¥çº¿æ€§æ‰©å……ã€‚åŒæ—¶ä¹Ÿå¯ä»¥è®© SSO æœåŠ¡æ»¡è¶³è´Ÿè½½å‡è¡¡/å¯ä¼¸ç¼©çš„éœ€æ±‚ã€‚ å¯¹è±¡ è¯´æ˜ AuthToken ç›´æ¥ä½¿ç”¨ UUID/GUID å³å¯ï¼Œå¦‚æœæœ‰éªŒè¯ AuthToken åˆæ³•æ€§éœ€æ±‚ï¼Œå¯ä»¥å°† UserName+æ—¶é—´æˆ³åŠ å¯†ç”Ÿæˆï¼ŒæœåŠ¡ç«¯è§£å¯†ä¹‹åéªŒè¯åˆæ³•æ€§ ç™»å½•ä¿¡æ¯ é€šå¸¸æ˜¯å°† UserIdï¼ŒUserName ç¼“å­˜èµ·æ¥ # ç”¨æˆ·ç™»å½•/ç™»å½•æ ¡éªŒ ç™»é™†æ—¶åºå›¾"><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu9b4ee4aab7d2c9a136b427e2430a0345_27821_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>Runqi Blog</a></h1><h2 class=site-description>Stay foolish stay hungry</h2></div></header><ol class=menu-social><li><a href=https://github.com/runqi-zhao target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ssoä»‹ç»>SSOä»‹ç»</a><ol><li><a href=#æ¦‚å¿µ>æ¦‚å¿µ</a></li><li><a href=#å¥½å¤„>å¥½å¤„</a></li></ol></li><li><a href=#å®ç°æ–¹å¼>å®ç°æ–¹å¼</a><ol><li><a href=#ç”¨æˆ·ç™»å½•çŠ¶æ€çš„å­˜å‚¨ä¸æ ¡éªŒ>ç”¨æˆ·ç™»å½•çŠ¶æ€çš„å­˜å‚¨ä¸æ ¡éªŒ</a></li><li><a href=#ç”¨æˆ·ç™»å½•ç™»å½•æ ¡éªŒ>ç”¨æˆ·ç™»å½•/ç™»å½•æ ¡éªŒ</a></li><li><a href=#ç”¨æˆ·ç™»å‡º>ç”¨æˆ·ç™»å‡º</a></li><li><a href=#è·¨åŸŸç™»å½•ç™»å‡º>è·¨åŸŸç™»å½•ã€ç™»å‡º</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/java/ style=background-color:#269d8f;color:#fff>Java</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/sso%E5%8D%95%E7%82%B9%E7%99%BB%E5%BD%95/>SSOå•ç‚¹ç™»å½•</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 13, 2024</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>1 minute read</time></div></footer></div></header><section class=article-content><h2 id=ssoä»‹ç»><a href=#sso%e4%bb%8b%e7%bb%8d>#</a>
SSOä»‹ç»</h2><h3 id=æ¦‚å¿µ><a href=#%e6%a6%82%e5%bf%b5>#</a>
æ¦‚å¿µ</h3><p>SSO è‹±æ–‡å…¨ç§° Single Sign Onï¼Œå•ç‚¹ç™»å½•ã€‚SSO æ˜¯åœ¨å¤šä¸ªåº”ç”¨ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·åªéœ€è¦ç™»å½•ä¸€æ¬¡å°±å¯ä»¥è®¿é—®æ‰€æœ‰ç›¸äº’ä¿¡ä»»çš„åº”ç”¨ç³»ç»Ÿã€‚</p><h3 id=å¥½å¤„><a href=#%e5%a5%bd%e5%a4%84>#</a>
å¥½å¤„</h3><p><strong>ç”¨æˆ·è§’åº¦</strong> :ç”¨æˆ·èƒ½å¤Ÿåšåˆ°ä¸€æ¬¡ç™»å½•å¤šæ¬¡ä½¿ç”¨ï¼Œæ— éœ€è®°å½•å¤šå¥—ç”¨æˆ·åå’Œå¯†ç ï¼Œçœå¿ƒã€‚</p><p><strong>ç³»ç»Ÿç®¡ç†å‘˜è§’åº¦</strong> : ç®¡ç†å‘˜åªéœ€ç»´æŠ¤å¥½ä¸€ä¸ªç»Ÿä¸€çš„è´¦å·ä¸­å¿ƒå°±å¯ä»¥äº†ï¼Œæ–¹ä¾¿ã€‚</p><p><strong>æ–°ç³»ç»Ÿå¼€å‘è§’åº¦:</strong> æ–°ç³»ç»Ÿå¼€å‘æ—¶åªéœ€ç›´æ¥å¯¹æ¥ç»Ÿä¸€çš„è´¦å·ä¸­å¿ƒå³å¯ï¼Œç®€åŒ–å¼€å‘æµç¨‹ï¼Œçœæ—¶</p><h2 id=å®ç°æ–¹å¼><a href=#%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f>#</a>
å®ç°æ–¹å¼</h2><p>è®¾è®¡æ–¹å¼ï¼š</p><p><img src=https://img-1312072469.cos.ap-nanjing.myqcloud.com/sso-system.png-kblb.png loading=lazy alt=å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰è®¾è®¡></p><h3 id=ç”¨æˆ·ç™»å½•çŠ¶æ€çš„å­˜å‚¨ä¸æ ¡éªŒ><a href=#%e7%94%a8%e6%88%b7%e7%99%bb%e5%bd%95%e7%8a%b6%e6%80%81%e7%9a%84%e5%ad%98%e5%82%a8%e4%b8%8e%e6%a0%a1%e9%aa%8c>#</a>
ç”¨æˆ·ç™»å½•çŠ¶æ€çš„å­˜å‚¨ä¸æ ¡éªŒ</h3><p>å¸¸è§çš„ Web æ¡†æ¶å¯¹äº Session çš„å®ç°éƒ½æ˜¯ç”Ÿæˆä¸€ä¸ª SessionId å­˜å‚¨åœ¨æµè§ˆå™¨ Cookie ä¸­ã€‚ç„¶åå°† Session å†…å®¹å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯å†…å­˜ä¸­ã€‚</p><p>ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œç”Ÿæˆ AuthToken äº¤ç»™å®¢æˆ·ç«¯ä¿å­˜ã€‚å¦‚æœæ˜¯æµè§ˆå™¨ï¼Œå°±ä¿å­˜åœ¨ Cookie ä¸­ã€‚å¦‚æœæ˜¯æ‰‹æœº App å°±ä¿å­˜åœ¨ App æœ¬åœ°ç¼“å­˜ä¸­ã€‚æœ¬ç¯‡ä¸»è¦æ¢è®¨åŸºäº Web ç«™ç‚¹çš„ SSOã€‚</p><p>ç”¨æˆ·åœ¨æµè§ˆéœ€è¦ç™»å½•çš„é¡µé¢æ—¶ï¼Œå®¢æˆ·ç«¯å°† AuthToken æäº¤ç»™ SSO æœåŠ¡æ ¡éªŒç™»å½•çŠ¶æ€/è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯</p><p>å¯¹äºç™»å½•ä¿¡æ¯çš„å­˜å‚¨ï¼Œå»ºè®®é‡‡ç”¨ Redisï¼Œä½¿ç”¨ Redis é›†ç¾¤æ¥å­˜å‚¨ç™»å½•ä¿¡æ¯ï¼Œæ—¢å¯ä»¥ä¿è¯é«˜å¯ç”¨ï¼Œåˆå¯ä»¥çº¿æ€§æ‰©å……ã€‚åŒæ—¶ä¹Ÿå¯ä»¥è®© SSO æœåŠ¡æ»¡è¶³è´Ÿè½½å‡è¡¡/å¯ä¼¸ç¼©çš„éœ€æ±‚ã€‚</p><div class=table-wrapper><table><thead><tr><th>å¯¹è±¡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>AuthToken</td><td>ç›´æ¥ä½¿ç”¨ UUID/GUID å³å¯ï¼Œå¦‚æœæœ‰éªŒè¯ AuthToken åˆæ³•æ€§éœ€æ±‚ï¼Œå¯ä»¥å°† UserName+æ—¶é—´æˆ³åŠ å¯†ç”Ÿæˆï¼ŒæœåŠ¡ç«¯è§£å¯†ä¹‹åéªŒè¯åˆæ³•æ€§</td></tr><tr><td>ç™»å½•ä¿¡æ¯</td><td>é€šå¸¸æ˜¯å°† UserIdï¼ŒUserName ç¼“å­˜èµ·æ¥</td></tr></tbody></table></div><h3 id=ç”¨æˆ·ç™»å½•ç™»å½•æ ¡éªŒ><a href=#%e7%94%a8%e6%88%b7%e7%99%bb%e5%bd%95%e7%99%bb%e5%bd%95%e6%a0%a1%e9%aa%8c>#</a>
ç”¨æˆ·ç™»å½•/ç™»å½•æ ¡éªŒ</h3><p>ç™»é™†æ—¶åºå›¾</p><p><img src=https://img-1312072469.cos.ap-nanjing.myqcloud.com/sso-login-sequence.png-kbrb.png loading=lazy alt=SSOç³»ç»Ÿè®¾è®¡-ç™»å½•æ—¶åºå›¾></p><p>æŒ‰ç…§ä¸Šå›¾ï¼Œç”¨æˆ·ç™»å½•å AuthToken ä¿å­˜åœ¨ Cookie ä¸­ã€‚ <a class=link href="http://domain=test.com" target=_blank rel=noopener>domain=test.comopen in new window</a>
æµè§ˆå™¨ä¼šå°† domain è®¾ç½®æˆ .test.comï¼Œ</p><p>è¿™æ ·è®¿é—®æ‰€æœ‰ *.test.com çš„ web ç«™ç‚¹ï¼Œéƒ½ä¼šå°† AuthToken æºå¸¦åˆ°æœåŠ¡å™¨ç«¯ã€‚ç„¶åé€šè¿‡ SSO æœåŠ¡ï¼Œå®Œæˆå¯¹ç”¨æˆ·çŠ¶æ€çš„æ ¡éªŒ/ç”¨æˆ·ç™»å½•ä¿¡æ¯çš„è·å–</p><p><strong>ç™»å½•ä¿¡æ¯è·å–/ç™»å½•çŠ¶æ€æ ¡éªŒ</strong></p><p><img src=https://img-1312072469.cos.ap-nanjing.myqcloud.com/sso-logincheck-sequence.png-kbrb.png loading=lazy alt=SSOç³»ç»Ÿè®¾è®¡-ç™»å½•ä¿¡æ¯è·å–/ç™»å½•çŠ¶æ€æ ¡éªŒ></p><h3 id=ç”¨æˆ·ç™»å‡º><a href=#%e7%94%a8%e6%88%b7%e7%99%bb%e5%87%ba>#</a>
ç”¨æˆ·ç™»å‡º</h3><p>ç”¨æˆ·ç™»å‡ºæ—¶è¦åšçš„äº‹æƒ…å¾ˆç®€å•ï¼š</p><ol><li>æœåŠ¡ç«¯æ¸…é™¤ç¼“å­˜ï¼ˆRedisï¼‰ä¸­çš„ç™»å½•çŠ¶æ€</li><li>å®¢æˆ·ç«¯æ¸…é™¤å­˜å‚¨çš„ AuthToken</li></ol><p><strong>ç™»å‡ºæ—¶åºå›¾</strong></p><p><img src=https://img-1312072469.cos.ap-nanjing.myqcloud.com/sso-logout-sequence.png-kbrb.png loading=lazy alt=SSOç³»ç»Ÿè®¾è®¡-ç”¨æˆ·ç™»å‡º></p><h3 id=è·¨åŸŸç™»å½•ç™»å‡º><a href=#%e8%b7%a8%e5%9f%9f%e7%99%bb%e5%bd%95%e7%99%bb%e5%87%ba>#</a>
è·¨åŸŸç™»å½•ã€ç™»å‡º</h3><p>å‰é¢æåˆ°è¿‡ï¼Œæ ¸å¿ƒæ€è·¯æ˜¯å®¢æˆ·ç«¯å­˜å‚¨ AuthTokenï¼ŒæœåŠ¡å™¨ç«¯é€šè¿‡ Redis å­˜å‚¨ç™»å½•ä¿¡æ¯ã€‚ç”±äºå®¢æˆ·ç«¯æ˜¯å°† AuthToken å­˜å‚¨åœ¨ Cookie ä¸­çš„ã€‚æ‰€ä»¥è·¨åŸŸè¦è§£å†³çš„é—®é¢˜ï¼Œå°±æ˜¯å¦‚ä½•è§£å†³ Cookie çš„è·¨åŸŸè¯»å†™é—®é¢˜ã€‚</p><p>è§£å†³è·¨åŸŸçš„æ ¸å¿ƒæ€è·¯å°±æ˜¯ï¼š</p><ul><li>ç™»å½•å®Œæˆä¹‹åé€šè¿‡å›è°ƒçš„æ–¹å¼ï¼Œå°† AuthToken ä¼ é€’ç»™ä¸»åŸŸåä¹‹å¤–çš„ç«™ç‚¹ï¼Œè¯¥ç«™ç‚¹è‡ªè¡Œå°† AuthToken ä¿å­˜åœ¨å½“å‰åŸŸä¸‹çš„ Cookie ä¸­ã€‚</li><li>ç™»å‡ºå®Œæˆä¹‹åé€šè¿‡å›è°ƒçš„æ–¹å¼ï¼Œè°ƒç”¨éä¸»åŸŸåç«™ç‚¹çš„ç™»å‡ºé¡µé¢ï¼Œå®Œæˆè®¾ç½® Cookie ä¸­çš„ AuthToken è¿‡æœŸçš„æ“ä½œã€‚</li></ul><p><strong>è·¨åŸŸç™»å½•ï¼ˆä¸»åŸŸåå·²ç™»å½•ï¼‰</strong></p><p><img src=https://img-1312072469.cos.ap-nanjing.myqcloud.com/sso-crossdomain-login-loggedin-sequence.png-kbrb.png loading=lazy alt=SSOç³»ç»Ÿè®¾è®¡-è·¨åŸŸç™»å½•ï¼ˆä¸»åŸŸåå·²ç™»å½•ï¼‰></p><p><strong>è·¨åŸŸç™»å½•ï¼ˆä¸»åŸŸåæœªç™»å½•ï¼‰</strong></p><p><img src=https://img-1312072469.cos.ap-nanjing.myqcloud.com/sso-crossdomain-login-unlogin-sequence.png-kbrb.png loading=lazy alt=SSOç³»ç»Ÿè®¾è®¡-è·¨åŸŸç™»å½•ï¼ˆä¸»åŸŸåæœªç™»å½•ï¼‰></p><p><strong>è·¨åŸŸç™»å‡º</strong></p><p><img src=https://img-1312072469.cos.ap-nanjing.myqcloud.com/sso-crossdomain-logout-sequence.png-kbrb.png loading=lazy alt=SSOç³»ç»Ÿè®¾è®¡-è·¨åŸŸç™»å‡º></p></section><footer class=article-footer><section class=article-tags><a href=/tags/%E8%AE%A4%E8%AF%81%E9%89%B4%E6%9D%83/>è®¤è¯é‰´æƒ</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/jwt%E8%AF%A6%E8%A7%A3/><div class=article-details><h2 class=article-title>Jwtè¯¦è§£</h2></div></a></article><article class=has-image><a href=/p/%E6%9C%8D%E5%8A%A1%E5%90%8C%E6%AD%A5-hhtp%E9%95%BF%E8%BD%AE%E8%AF%A2/><div class=article-image><img src=https://shenyu.apache.org/zh/img/logo.svg loading=lazy data-key data-hash=https://shenyu.apache.org/zh/img/logo.svg></div><div class=article-details><h2 class=article-title>æœåŠ¡åŒæ­¥-hhtpé•¿è½®è¯¢</h2></div></a></article><article><a href=/p/threadlocal/><div class=article-details><h2 class=article-title>Threadlocal</h2></div></a></article><article class=has-image><a href=/p/%E6%9C%8D%E5%8A%A1%E5%90%8C%E6%AD%A5/><div class=article-image><img src=https://shenyu.apache.org/zh/img/logo.svg loading=lazy data-key data-hash=https://shenyu.apache.org/zh/img/logo.svg></div><div class=article-details><h2 class=article-title>æœåŠ¡åŒæ­¥</h2></div></a></article><article class=has-image><a href=/p/%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8/><div class=article-image><img src=https://shenyu.apache.org/zh/img/logo.svg loading=lazy data-key data-hash=https://shenyu.apache.org/zh/img/logo.svg></div><div class=article-details><h2 class=article-title>æœåŠ¡è°ƒç”¨</h2></div></a></article></div></div></aside><script src=//unpkg.com/@waline/client@v2/dist/waline.js></script><link href=//unpkg.com/@waline/client@v2/dist/waline.css rel=stylesheet><div id=waline class=waline-container></div><style>.waline-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding);--waline-font-size:var(--article-font-size)}.waline-container .wl-count{color:var(--card-text-color-main)}</style><script>Waline.init({avatar:"retro",avatarcdn:"https://sdn.geekzu.org/avatar/",dark:'html[data-scheme="dark"]',el:"#waline",emoji:["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo"],highlight:!0,js:"https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js",lang:"zh-CN",locale:{admin:"Admin",placeholder:null},meta:["nick","mail","link"],pageSize:20,placeholder:"",requiredMeta:["name","email","url"],serverURL:"https://waline-line-git-main-zrsaber.vercel.app",uploadimage:!1,visitor:!0})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Runqi Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.25.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>